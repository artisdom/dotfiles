#!/bin/bash
#All my custom BASH functions

#custom dig function, accepts url as argument
function digg(){
  local url=$1
  dig "$url" +nostats +nocomments +nocmd
}

function gfind {
  awk "/#\[$1-start\]/,/#\[$1-end\]/ { print }" ~/.dotfiles/bash/aliases
}

function ip {
  YELLOW="\033[33m"
  IP=$(ifconfig | grep 'inet 1' | cut -c 6- | awk 'NR==2 {print $1}')
  echo -e ${YELLOW}$IP
  echo $IP | pbcopy
}

function move_dock {
  if [ "$1" = "left" ]; then
    defaults write com.apple.dock pinning -string start && killall Dock
  fi
  if [ "$1" = "right" ]; then
    defaults write com.apple.dock pinning -string end && killall Dock
  fi
  if [ "$1" = "middle" ]; then
    defaults write com.apple.dock pinning -string middle && killall Dock
  fi
}

function vhost {
  sudo ~/.dotfiles/osx/mamp_vh.sh $1
}

function al {
 awk "/#\[$1\]/,/#\[end\]/ { print }" ~/.dotfiles/bash/aliases | cut -c 7-
}

function hack {
  for file in /Applications/MAMP/Library/vhosts/domains/*
  do
    if [ -f "$file" ];then
     echo -e "${YELLOW}${file##/*/}${NC}"
    fi
  done
}

function ht {
  local BLUE="\033[0;34m"
  local RED="\033[0;31m"
  local WHITE="\033[0;37m"
  local NC="\033[0m"

  echo -e "${BLUE}Projects:${NC}"
    for file in /Applications/MAMP/htdocs/*
    do
      if [ -d "$file" ];then
       echo ${file##/*/}
      fi
    done
  echo -e "${RED}Which Project?${NC}"
  read dir;
  cd /Applications/MAMP/htdocs/$dir
}

function hg {
  history | grep --color=auto $1
}

function parse_git_branch {
  git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ \[\1\]/'
}

function proml {
  local        BLUE="\[\033[0;34m\]"
  local     DEFAULT="\[\033[0m\]"
  local		CYAN="\e[36m"
  local		RED="\e[31m"
  local 	 BLACK="\e[30m"
  local    GREEN="\e[32m"
  local    YELLOW="\e[33m"
  local    BLUE="\e[34m"
  local    MAGENTA="\e[35m"
  local    WHITE="\e[37m"

PS1="$DEFAULT\u: $DEFAULT\w $YELLOW\$(parse_git_branch) \n‚ö° $DEFAULT"
}
proml

#‚áí ‚û• ‚áæ ‚áÄ ‚û§ ‚ùñ ‚òÖ ‚ûî üîÖüí©üöÄ‚ö°

function sb_init {
  local RED="\033[0;31m"
  local NC="\033[0m"

  if [ ! $# == 1 ]; then
    echo -e "${RED}Please specify a project name.${NC}"
    echo -e "Usage: init project-name\n"
  else
    echo -e "${RED}Downloading project-init${NC} üöÄ\n"
    curl -s -S -O -L http://github.com/sparkbox/project-init/archive/master.zip;
    echo -e "${RED}Download finished.${NC}\n"
    echo -e "${RED}Setting up project config files.${NC}\n"
    unzip -qq master.zip;
    rm master.zip;
    mv project-init-master $1
    sed -i.bak "s/Project-Name/$1/g" $1/package.json;
    rm $1/package.json.bak;
    sed -i.bak "s/Project-Name/$1/g" $1/.rvmrc;
    rm $1/.rvmrc.bak;
    cd $1
    npm install;
    bundle;
    echo -e "${RED}Your project is all ready to go. Enjoy${NC}\n"
  fi
}